import os

COUNTER_FILE = "nota_counter.txt"

def get_next_nota():
    # Jika file belum ada, buat dengan nilai awal 1
    if not os.path.exists(COUNTER_FILE):
        with open(COUNTER_FILE, "w") as f:
            f.write("1")
        return 1

    # Jika file ada, baca isinya
    with open(COUNTER_FILE, "r") as f:
        data = f.read().strip()

    # Jika isi kosong atau tidak bisa di-convert, pakai default 1
    if not data or not data.isdigit():
        current = 1
    else:
        current = int(data)

    next_nota = current + 1

    # Simpan nilai berikutnya ke file
    with open(COUNTER_FILE, "w") as f:
        f.write(str(next_nota))

    return current
